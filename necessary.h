#include <stdio.h>
#include <windows.h>

#define H 20
#define W 22

#define PIECESIZE 5
#define BRICK 178
#define SHADOW '+'

char up = 'w', down = 's', left = 'a', right = 'd', hDrop = ' ', hold = 'c'; /// controls

enum Color
{
    BLACK, GREY = 8, BLUE , GREEN, CYAN, RED, PURPLE, LIGHT_YELLOW, WHITE
};

void setCursorPosition(short int x, short int y)
{
   COORD coord = { x, y };
   SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coord);

}

void textColor(int color)
{
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), color);
}

/*
    Hide Cursor function in Terminal.
*/
void hidecursor()
{
   HANDLE consoleHandle = GetStdHandle(STD_OUTPUT_HANDLE);
   CONSOLE_CURSOR_INFO info;
   info.dwSize = 100;
   info.bVisible = FALSE;
   SetConsoleCursorInfo(consoleHandle, &info);
}

void showCursor()
{
   HANDLE consoleHandle = GetStdHandle(STD_OUTPUT_HANDLE);
   CONSOLE_CURSOR_INFO info;
   info.dwSize = 100;
   info.bVisible = TRUE;
   SetConsoleCursorInfo(consoleHandle, &info);
}

char field [][W+3] = 
{
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"|                      |"},
    {"-======================-"}
};

int block[][4][PIECESIZE][2] =  /// [blockNumber][rotation][x][y]
{ 
    {
        {{-1,1}, {-1,0}, {0,0}, {1,0}},   //          //
        {{0,1}, {1,1}, {0,0}, {0,-1}},    //    #     //
        {{-1,0}, {0,0}, {1,0}, {1,-1}},   //    #     //
        {{0,1}, {0,0}, {0,-1}, {-1,-1}}   //   ##     //
    },

    {
        {{-1,-1}, {-1,0}, {0,0}, {1,0}},  //          //
        {{0,-1}, {0,0}, {0,1}, {-1,1}},   //    #     //
        {{-1,0}, {0,0}, {1,0}, {1,1}},    //    #     //
        {{0,1}, {0,0}, {0,-1}, {1,-1}}    //    ##    //
    },
    {
        {{0,-1}, {0,0}, {0,1}, {-1,0}},   //          //
        {{-1,0}, {0,0}, {0,1}, {1,0}},    //    #     //
        {{0,-1}, {0,0}, {0,1}, {1,0}},    //   ###    //
        {{-1,0}, {0,0}, {0,-1}, {1,0}}    //          //
    },
    {
        {{-1,1}, {-1,0}, {0,0}, {0,-1}},  //          //
        {{-1,-1}, {0,-1}, {0,0}, {1,0}},  //    ##    //
        {{-1,1}, {-1,0}, {0,0}, {0,-1}},  //   ##     //
        {{-1,-1}, {0,-1}, {0,0}, {1,0}}   //          //
    },
    {
        {{-1,-1}, {-1,0}, {0,0}, {0,1}},  //          //
        {{-1,1}, {0,1}, {0,0}, {1,0}},    //   ##     //
        {{-1,-1}, {-1,0}, {0,0}, {0,1}},  //    ##    //
        {{-1,1}, {0,1}, {0,0}, {1,0}}     //          //
    },
    {
        {{0,0}, {0,1}, {-1,0}, {-1,1}},   //          //
        {{0,0}, {0,1}, {-1,0}, {-1,1}},   //    ##    //
        {{0,0}, {0,1}, {-1,0}, {-1,1}},   //    ##    //
        {{0,0}, {0,1}, {-1,0}, {-1,1}}    //          //
    },
    {
        {{0,-1}, {0,0}, {0,1}, {0,2}},    //    #     //
        {{-1,0}, {0,0}, {1,0}, {2,0}},    //    #     //
        {{0,-1}, {0,0}, {0,1}, {0,2}},    //    #     //
        {{-1,0}, {0,0}, {1,0}, {2,0}}     //    #     //
    },

    // Pentominos...

    {
        {{-1,0},{0,-1},{0,0},{1,0},{2,0}},  //  #   //
        {{0,2},{0,-1},{0,0},{1,0},{0,1}},   // ##   //
        {{2,0},{-1,0},{0,0},{1,0},{1,1}},   //  #   //
        {{0,-1},{0,1},{0,0},{0,2},{-1,1}}   //  #   //
    },
    {
        {{-1,0},{0,1},{0,0},{2,0},{1,0}},   //  #   //
        {{-1,0},{0,-1},{0,0},{0,2},{0,1}},  //  ##  //
        {{-1,0},{1,-1},{0,0},{1,0},{2,0}},  //  #   //
        {{0,-1},{0,1},{0,0},{1,1},{0,2}}    //  #   //
    },
    {
        {{-1,-1},{-1,0},{0,0},{1,0},{1,1}}, //      //
        {{-1,1},{0,-1},{0,0},{1,-1},{0,1}}, // ##   //
        {{-1,-1},{-1,0},{0,0},{1,0},{1,1}}, //  #   //
        {{-1,1},{0,-1},{0,0},{1,-1},{0,1}}  //  ##  //
    },
    {
        {{-1,0},{1,0},{0,0},{-1,1},{1,-1}}, //      //
        {{1,1},{0,1},{0,0},{-1,-1},{0,-1}}, // #    //
        {{-1,0},{1,0},{0,0},{-1,1},{1,-1}}, // ###  //
        {{1,1},{0,1},{0,0},{-1,-1},{0,-1}}  //   #  //
    },
    {
        {{1,-1},{1,0},{0,0},{0,1},{-1,1}},  //   #  //
        {{-1,-1},{-1,0},{0,0},{0,1},{1,1}}, //  ##  //
        {{-1,0},{-1,1},{0,0},{0,-1},{1,-1}},// ##   //
        {{-1,-1},{0,-1},{0,0},{1,0},{1,1}}  //      //
    },
    {
        {{-1,-1},{0,-1},{0,0},{1,0},{1,1}}, //  #   //
        {{-1,0},{-1,1},{0,0},{0,-1},{1,-1}},//  ##  //
        {{-1,-1},{-1,0},{0,0},{0,1},{1,1}}, //   ## //
        {{1,-1},{1,0},{0,0},{0,1},{-1,1}}   //      //
    },
    {
        {{-1,0},{1,-1},{0,0},{1,0},{1,1}},  //  #   //
        {{0,-1},{-1,1},{0,0},{0,1},{1,1}},  //  #   //
        {{-1,-1},{-1,0},{0,0},{-1,1},{1,0}},// ###  //
        {{-1,-1},{0,-1},{0,0},{0,1},{1,-1}} //      //
    },
    {
        {{-1,1},{0,1},{1,0},{1,-1},{1,1}},    //   #  //
        {{-1,-1},{-1,0},{-1,1},{0,1},{1,1}},  //   #  //
        {{-1,-1},{-1,0},{-1,1},{0,-1},{1,-1}},// ###  //
        {{-1,-1},{1,0},{1,1},{0,-1},{1,-1}},  //      //
    },
    {
        {{-1,-1},{-1,0},{-1,1},{0,-1},{1,-1}},// ### //
        {{-1,-1},{1,0},{1,1},{0,-1},{1,-1}},  // #   //
        {{-1,1},{0,1},{1,0},{1,-1},{1,1}},    // #   //
        {{-1,-1},{-1,0},{-1,1},{0,1},{1,1}},  //     //
    },
    {
        {{-1,0},{-1,1},{0,-1},{0,0},{0,1}},  //      //
        {{-1,-1},{-1,0},{0,-1},{0,0},{1,0}}, //  ##  //
        {{-1,-1},{-1,0},{0,-1},{0,0},{-1,1}},// ###  //
        {{-1,-1},{0,-1},{0,0},{1,0},{1,-1}}, //      //
    },
    {
        {{-1,-1},{-1,0},{0,0},{0,-1},{0,1}}, //    # // 
        {{-1,0},{1,0},{0,0},{0,-1},{1,-1}},  //   ## //
        {{-1,0},{0,1},{0,0},{-1,1},{-1,-1}}, //   ## //
        {{-1,0},{0,-1},{0,0},{1,-1},{-1,-1}},//      //   
    },
    {
        {{-1,-1},{-1,0},{0,0},{0,1},{0,2}},  //      //
        {{1,-1},{-1,0},{0,0},{1,0},{2,-1}},  // ##   //
        {{-1,-1},{-1,0},{0,1},{-1,1},{0,2}}, //  ### //
        {{-1,0},{0,0},{0,-1},{1,-1},{2,-1}}, //      //
    },
    {
        {{0,1},{0,2},{1,1},{1,0},{1,-1}},   //       //
        {{-1,-1},{0,-1},{0,0},{1,0},{2,0}}, //    ## //
        {{-1,0},{-1,1},{0,0},{0,-1},{-1,2}},//  ###  //
        {{-1,-1},{0,-1},{1,-1},{1,0},{2,0}},//       //
    },
    {
        {{-1,1},{0,1},{0,0},{0,-1},{1,0}},  //     # //
        {{-1,-1},{-1,0},{0,0},{0,1},{1,0}}, //   ### //
        {{-1,0},{0,-1},{0,0},{0,1},{1,-1}}, //    #  //
        {{-1,0},{0,-1},{0,0},{1,0},{1,1}},  //       //
    },
    {
        {{-1,-1},{0,-1},{0,0},{0,1},{1,0}}, //  #    //
        {{-1,0},{0,1},{0,0},{1,-1},{1,0}},  //  ###  //
        {{-1,0},{0,-1},{0,0},{0,1},{1,1}},  //   #   //
        {{-1,0},{-1,1},{0,0},{0,-1},{1,0}}, //       //
    },
    {
        {{-1,0},{1,0},{0,0},{0,-1},{0,1}},  //   #   //
        {{-1,0},{1,0},{0,0},{0,-1},{0,1}},  //  ###  //
        {{-1,0},{1,0},{0,0},{0,-1},{0,1}},  //   #   //
        {{-1,0},{1,0},{0,0},{0,-1},{0,1}},  //       //
    },
    {
        {{-1,0},{1,0},{0,0},{2,0},{3,0}},   //   #   //
        {{0,-1},{0,0},{0,1},{0,2},{0,3}},   //   #   //
        {{-1,0},{1,0},{0,0},{2,0},{3,0}},   //   #   //
        {{0,-1},{0,0},{0,1},{0,2},{0,3}},   //   #   //  
    },
    {
        {{-1,-1},{0,0},{0,-1},{-1,1},{0,1}}, //      //
        {{-1,-1},{-1,0},{0,0},{1,0},{1,-1}}, //  ### //
        {{-1,-1},{-1,0},{0,-1},{-1,1},{0,1}},//  # # //
        {{-1,-1},{-1,0},{0,-1},{1,-1},{1,0}},//      //
    }

};
